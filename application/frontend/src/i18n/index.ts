import { useEffect, useState } from "react";

export const locales = [
  { code: "en", label: "English" },
  { code: "uz", label: "O'zbek" },
  { code: "ru", label: "Русский" },
  { code: "ko", label: "한국어" },
  { code: "tr", label: "Türkçe" },
  { code: "de", label: "Deutsch" },
];

let current = "uz";

const strings: Record<string, Record<string, string>> = {
  en: {
    appTitle: "LinguaText",
    helloTitle: "Study Language by Text",
    environmentTWA: "Welcome to the app!",
    andHelloName: "and hello, {name}!",
    folders: "Folders",
    texts: "Texts",
    vocabulary: "Vocabulary",
    home: "Home",
    newFolder: "New folder",
    createIn: "Create in {place}",
    root: "Root",
    nameLabel: "Name",
    newFolderPlaceholder: "My folder",
    nameHelper: "1-100 characters",
    cancel: "Cancel",
    create: "Create",
    unauthorized: "Please log in",
    errorLoadFolders: "Failed to load folders",
    folderCreated: "Folder created",
    nameExists: "Name already exists",
    rename: "Rename",
    delete: "Delete",
    confirmDeleteFolder: "Delete this folder (and everything inside)?",
    confirmDeleteText: "Delete this text?",
    failed: "Failed",
    addText: "Add text",
    titleLabel: "Title",
    uzRawLabel: "Uzbek text",
    enRawLabel: "English text",
    pleaseFillAllFieldsCorrectly: "Please fill all fields correctly",
    createText: "Create text",
    textCreated: "Text created",
    failedOpenEditor: "Failed to open editor",
    textUpdated: "Text updated",
    library: "Library",
    makeGlobal: "Make global",
    unpublish: "Unpublish",
    published: "Published",
    unpublished: "Unpublished",
    import: "Import",
    importFolder: "Import folder",
    namePrefix: "Name prefix",
    imported: "Imported",
    back: "Back",
    loading: "Loading...",
    addToVocabulary: "Add to vocabulary",
    wordLabel: "Word",
    translationLabel: "Translation",
    noteLabel: "Note",
    save: "Save",
    noSentences: "No items found",
    translationFirst: "Translation first",
    wordFirst: "Word first",
    search: "Search",
    loggingIn: "Logging in...",
    loggedInAs: "Logged in as",
    loginWithTelegram: "Log in with Telegram",
    openInTelegramToLogin: "Open inside Telegram to log in",
    // Common generic labels
    add: "Add",
    edit: "Edit",
    saved: "Saved",
    word: "Word",
    translation: "Translation",
    note: "Note",
    more: "More",
    toggle: "Toggle",
    stop: "Stop",
    stopPractice: "Stop Practice",
    practice: "Practice",
    quiz: "Quiz",
    close: "Close",
    scoreLabel: "Score",
    day: "Day",
    allDays: "All days",
    play: "Play",
    speak: "Speak",
    starting: "starting",
    listenAction: "listen",
    speakAction: "speak",
    unknown: "unknown",
    needMoreForQuiz: "Add more words to start a quiz",
    apply: "Apply",
    chooseLanguageTitle: "Choose your language",
    chooseLanguageBody: "You can change it later from the top bar.",
    // Study page common labels
    correct: "Correct!",
    incorrect: "Try again",
    reveal: "Reveal",
    reset: "Reset",
    check: "Check",
    prev: "Prev",
    next: "Next",
    tapWordsBelow: "Tap words below to build the sentence",
    correctAnswer: "Correct answer",
    zoomIn: "Zoom in",
    zoomOut: "Zoom out",
    resetZoom: "Reset",
    // Guided tour
    tourNext: "Next",
    tourSkip: "Skip",
    tourDone: "Done",
    tourWelcomeTitle: "Quick tour",
    tourWelcomeBody: "Let’s take a very quick tour so you feel at home.",
    tourFeaturesTitle: "What you can do",
    tourFeaturesBody:
      "• Create folders for your texts\n• Add texts and learn in short, clear sentences\n• Save new words to your Vocabulary\n• Practice listening and speaking\n• Check yourself with quick quizzes",
    tourFoldersTitle: "Folders",
    tourFoldersBody: "Your texts live here. Open, create, and organize them.",
    tourVocabTitle: "Vocabulary",
    tourVocabBody:
      "All your saved words in one place. Review and practice anytime.",
    tourLangTitle: "Language",
    tourLangBody: "Change the app language here.",
    tourLoginTitle: "Login with Telegram",
    tourLoginBody: "Log in to keep your progress in sync across devices.",
    tourRestart: "Show tour",
    // Folders page tour
    tourHomeTitle: "Home",
    tourHomeBody: "Go to the main page.",
    tourBackTitle: "Back",
    tourBackBody: "Go up to the parent folder.",
    tourBreadcrumbsTitle: "Breadcrumbs",
    tourBreadcrumbsBody:
      "Use these links to jump back. Tip: drag a folder or text onto a link to move it.",
    tourCreateFolderTitle: "Create folder",
    tourCreateFolderBody: "Make a new folder.",
    tourAddTextTitle: "Add text",
    tourAddTextBody: "Add a new text to this folder.",
    tourLibraryTitle: "Library",
    tourLibraryBody: "Open the public library.",
    tourFoldersOverviewTitle: "Folders page",
    tourFoldersOverviewBody:
      "This is your library. Create folders, add texts, and drag items to organize.",
    // StudyText page tour
    tourStudyOverviewTitle: "Study page",
    tourStudyOverviewBody:
      "Build the English sentence from words below. Add new words to your vocabulary and move at your own pace.",
    tourBuildAreaTitle: "Build here",
    tourBuildAreaBody: "Tap a word to add it. Tap again to remove.",
    tourWordPoolTitle: "Word pool",
    tourWordPoolBody:
      "These words form the sentence. Use them to build your answer.",
    tourVocabButtonTitle: "Vocabulary",
    tourVocabButtonBody: "Save a word with translation and a note.",
    tourEditTokensTitle: "Edit words",
    tourEditTokensBody: "Adjust the words for this sentence if needed.",
    tourRevealTitle: "Need a hint?",
    tourRevealBody: "Reveal the correct sentence.",
    tourResetTitle: "Start over",
    tourResetBody: "Clear your answer and try again.",
    tourCheckTitle: "Check answer",
    tourCheckBody: "See if you got it right.",
    tourZoomTitle: "Zoom",
    tourZoomBody: "Make text bigger or smaller.",
    tourNavTitle: "Navigation",
    tourNavBody: "Go to the previous or next sentence.",
    tourProgressTitle: "Progress",
    tourProgressBody: "See where you are: current sentence out of total.",
    // Vocabulary page tour
    tourVocabOverviewTitle: "Vocabulary page",
    tourVocabOverviewBody:
      "Save words, search them by day, and practice or quiz yourself.",
    tourDayFilterTitle: "Filter by day",
    tourDayFilterBody: "Pick a day to see only words saved then.",
    tourToggleDisplayTitle: "Switch view",
    tourToggleDisplayBody:
      "Swap between word→translation and translation→word.",
    tourPracticeTitle: "Practice",
    tourPracticeBody: "Run a quick listen & speak session.",
    tourQuizButtonTitle: "Quiz",
    tourQuizButtonBody: "Test yourself with multiple choice.",
    tourAddButtonTitle: "Add word",
    tourAddButtonBody: "Add a new word with translation and note.",
    // Notes toggle
    showNotes: "Show notes",
    hideNotes: "Hide notes",
    hide: "Hide",
  },
  uz: {
    appTitle: "LinguaText",
    helloTitle: "Matn orqali tilni o'rganing",
    environmentTWA: "Ilovaga xush kelibsiz!",
    andHelloName: "salom, {name}!",
    folders: "Jildlar",
    texts: "Matnlar",
    vocabulary: "Lug'at",
    home: "Bosh sahifa",
    newFolder: "Yangi jild",
    createIn: "Qayerda yaratish: {place}",
    root: "Ildiz",
    nameLabel: "Nomi",
    newFolderPlaceholder: "Mening jildim",
    nameHelper: "1-100 ta belgi",
    cancel: "Bekor qilish",
    create: "Yaratish",
    unauthorized: "Iltimos, tizimga kiring",
    errorLoadFolders: "Jildlarni yuklab bo'lmadi",
    folderCreated: "Jild yaratildi",
    nameExists: "Bunday nom allaqachon mavjud",
    rename: "Nomini o'zgartirish",
    delete: "O'chirish",
    confirmDeleteFolder: "Bu jildni (ichidagini ham) o'chiraymi?",
    confirmDeleteText: "Bu matnni o'chiraymi?",
    failed: "Xatolik",
    addText: "Matn qo'shish",
    titleLabel: "Sarlavha",
    uzRawLabel: "O'zbekcha matn",
    enRawLabel: "Inglizcha matn",
    pleaseFillAllFieldsCorrectly: "Maydonlarni to'g'ri to'ldiring",
    createText: "Matn yaratish",
    textCreated: "Matn yaratildi",
    failedOpenEditor: "Tahrirlash oynasini ochib bo'lmadi",
    textUpdated: "Yangilandi",
    library: "Kutubxona",
    makeGlobal: "Ommaviy qilish",
    unpublish: "Ommaviydan olish",
    published: "Ommaviy qilindi",
    unpublished: "Ommaviydan olindi",
    import: "Import",
    importFolder: "Jildni import qilish",
    namePrefix: "Nom oldidan qo'shimcha",
    imported: "Import qilindi",
    back: "Orqaga",
    loading: "Yuklanmoqda...",
    addToVocabulary: "Lug'atga qo'shish",
    wordLabel: "So'z",
    translationLabel: "Tarjima",
    noteLabel: "Izoh",
    save: "Saqlash",
    noSentences: "Hali hech narsa yo'q",
    translationFirst: "Avval tarjima",
    wordFirst: "Avval so'z",
    search: "Qidirish",
    loggingIn: "Tizimga kirilmoqda...",
    loggedInAs: "Tizimga kirildi:",
    loginWithTelegram: "Telegram orqali kirish",
    openInTelegramToLogin: "Kirish uchun Telegram ichida oching",
    // Common generic labels
    add: "Qo'shish",
    edit: "Tahrirlash",
    saved: "Saqlandi",
    word: "So'z",
    translation: "Tarjima",
    note: "Izoh",
    more: "Ko'proq",
    toggle: "Almashtirish",
    stop: "To'xtatish",
    stopPractice: "Mashg'ulotni to'xtatish",
    practice: "Mashq qilish",
    quiz: "Viktorina",
    close: "Yopish",
    scoreLabel: "Ball",
    day: "Kun",
    allDays: "Barcha kunlar",
    play: "Ijro etish",
    speak: "Gapirish",
    starting: "boshlanmoqda",
    listenAction: "tinglang",
    speakAction: "gapiring",
    unknown: "noma'lum",
    needMoreForQuiz: "Viktorina uchun ko'proq so'z qo'shing",
    apply: "Qo'llash",
    chooseLanguageTitle: "Tilni tanlang",
    chooseLanguageBody:
      "Keyinroq yuqoridagi paneldan o'zgartirishingiz mumkin.",
    // Study page common labels
    correct: "To'g'ri!",
    incorrect: "Yana urinib ko'ring",
    reveal: "Ko'rsatish",
    reset: "Qayta",
    check: "Tekshirish",
    prev: "Oldingi",
    next: "Keyingi",
    tapWordsBelow: "Gapni yig'ish uchun quyidagi so'zlarni bosing",
    correctAnswer: "To'g'ri javob",
    zoomIn: "Kattalashtirish",
    zoomOut: "Kichraytirish",
    resetZoom: "100%",
    // Guided tour
    tourNext: "Keyingi",
    tourSkip: "O'tkazib yuborish",
    tourDone: "Tugatish",
    tourWelcomeTitle: "Qisqa yo'riqnoma",
    tourWelcomeBody: "Tez tanishib chiqish uchun kichik yo'riqnoma.",
    tourFeaturesTitle: "Nimalar qilasiz",
    tourFeaturesBody:
      "• Matnlar uchun jildlar yarating\n• Matn qo'shib, qisqa gaplar orqali o'rganing\n• Yangi so'zlarni Lug'atga saqlang\n• Tinglash va gapirishni mashq qiling\n• Tezkor viktorina bilan o'zingizni tekshiring",
    tourFoldersTitle: "Jildlar",
    tourFoldersBody: "Matnlaringiz shu yerda. Ochish, yaratish va tartiblash.",
    tourVocabTitle: "Lug'at",
    tourVocabBody:
      "Saqlangan so'zlaringiz shu yerda. Istalgan payt ko'rib chiqing.",
    tourLangTitle: "Til",
    tourLangBody: "Ilova tilini shu yerdan almashtiring.",
    tourLoginTitle: "Telegram orqali kirish",
    tourLoginBody: "Progresni qurilmalarda sinxron qilish uchun kiring.",
    tourRestart: "Yo'riqnomani ko'rsatish",
    // Folders page tour
    tourHomeTitle: "Bosh sahifa",
    tourHomeBody: "Asosiy sahifaga o'ting.",
    tourBackTitle: "Orqaga",
    tourBackBody: "Ota jildga qaytish.",
    tourBreadcrumbsTitle: "Yo'l ko'rsatkichlari",
    tourBreadcrumbsBody:
      "Tez qaytish uchun foydalaning. Maslahat: elementni ko'chirish uchun unga sudrab qo'ying.",
    tourCreateFolderTitle: "Jild yaratish",
    tourCreateFolderBody: "Yangi jild yarating.",
    tourAddTextTitle: "Matn qo'shish",
    tourAddTextBody: "Bu jildga yangi matn qo'shing.",
    tourLibraryTitle: "Kutubxona",
    tourLibraryBody: "Ommaviy kutubxonani ochish.",
    tourFoldersOverviewTitle: "Jildlar sahifasi",
    tourFoldersOverviewBody:
      "Bu sizning kutubxonangiz. Jild yarating, matn qo'shing va tartiblang.",
    // StudyText page tour
    tourStudyOverviewTitle: "O'rganish sahifasi",
    tourStudyOverviewBody:
      "Inglizcha gapni so'zlardan yig'ing. So'zlarni Lug'atga saqlang va o'zingizga qulay sur'atda ishlang.",
    tourBuildAreaTitle: "Yig'ish maydoni",
    tourBuildAreaBody: "So'zni bosib qo'shing. Yana bossangiz olib tashlanadi.",
    tourWordPoolTitle: "So'zlar",
    tourWordPoolBody: "Bu so'zlardan gap tuziling.",
    tourVocabButtonTitle: "Lug'at",
    tourVocabButtonBody: "So'zni tarjima va izoh bilan saqlang.",
    tourEditTokensTitle: "So'zlarni tahrirlash",
    tourEditTokensBody: "Kerak bo'lsa, gapdagi so'zlarni tuzating.",
    tourRevealTitle: "Yordam kerakmi?",
    tourRevealBody: "To'g'ri gapni ko'rsating.",
    tourResetTitle: "Qayta boshlash",
    tourResetBody: "Javobni tozalang va qayta urinib ko'ring.",
    tourCheckTitle: "Tekshirish",
    tourCheckBody: "Javobingiz to'g'riligini tekshiring.",
    tourZoomTitle: "Kattalashtirish",
    tourZoomBody: "Matn o'lchamini moslang.",
    tourNavTitle: "Navigatsiya",
    tourNavBody: "Oldingi/yangi gapga o'ting.",
    tourProgressTitle: "Progres",
    tourProgressBody: "Qaysi gapda ekaningizni ko'ring.",
    // Vocabulary page tour
    tourVocabOverviewTitle: "Lug'at sahifasi",
    tourVocabOverviewBody:
      "So'zlarni saqlang, kun bo'yicha ko'ring va mashq yoki viktorina qiling.",
    tourDayFilterTitle: "Kun bo'yicha",
    tourDayFilterBody: "Ma'lum bir kunda saqlangan so'zlarni ko'ring.",
    tourToggleDisplayTitle: "Ko'rinishni almashtirish",
    tourToggleDisplayBody: "So'z→tarjima va tarjima→so'z o'rtasida almashing.",
    tourPracticeTitle: "Mashq",
    tourPracticeBody: "Tinglash va gapirish mashg'ulotini boshlang.",
    tourQuizButtonTitle: "Viktorina",
    tourQuizButtonBody: "Ko'p variantli savollar bilan o'zingizni sinang.",
    tourAddButtonTitle: "So'z qo'shish",
    tourAddButtonBody: "Yangi so'zni tarjima va izoh bilan qo'shing.",
    // Notes toggle
    showNotes: "Izohlarni ko'rsatish",
    hideNotes: "Izohlarni yashirish",
    hide: "Yashirish",
  },
  ru: {
    appTitle: "LinguaText",
    helloTitle: "Изучайте язык по текстам",
    environmentTWA: "Добро пожаловать в приложение!",
    andHelloName: "и привет, {name}!",
    folders: "Папки",
    vocabulary: "Словарь",
    home: "Главная",
    correct: "Верно!",
    incorrect: "Попробуйте ещё раз",
    reveal: "Показать",
    reset: "Сброс",
    check: "Проверить",
    prev: "Назад",
    next: "Далее",
    tapWordsBelow: "Нажимайте слова ниже, чтобы собрать предложение",
    correctAnswer: "Правильный ответ",
    zoomIn: "Увеличить",
    zoomOut: "Уменьшить",
    resetZoom: "100%",
    // Guided tour (short)
    tourNext: "Далее",
    tourSkip: "Пропустить",
    tourDone: "Готово",
    tourWelcomeTitle: "Короткий тур",
    tourWelcomeBody: "Быстро познакомимся со страницами.",
    tourFeaturesTitle: "Что можно делать",
    tourFeaturesBody:
      "• Папки и тексты\n• Учим по предложениям\n• Сохраняем слова\n• Практикуем речь\n• Быстрые тесты",
    tourFoldersTitle: "Папки",
    tourFoldersBody: "Где лежат ваши тексты.",
    tourVocabTitle: "Словарь",
    tourVocabBody: "Ваши сохранённые слова.",
    tourLangTitle: "Язык",
    tourLangBody: "Меняем язык здесь.",
    tourLoginTitle: "Вход",
    tourLoginBody: "Синхронизация прогресса.",
    tourRestart: "Показать тур",
    tourHomeTitle: "Главная",
    tourHomeBody: "Перейти на главную.",
    tourBackTitle: "Назад",
    tourBackBody: "На уровень выше.",
    tourBreadcrumbsTitle: "Навигация",
    tourBreadcrumbsBody:
      "Ссылки для возврата. Можно перетащить элемент на ссылку.",
    tourCreateFolderTitle: "Создать папку",
    tourCreateFolderBody: "Новая папка.",
    tourAddTextTitle: "Добавить текст",
    tourAddTextBody: "Новый текст сюда.",
    tourLibraryTitle: "Библиотека",
    tourLibraryBody: "Публичные тексты.",
    tourFoldersOverviewTitle: "Страница папок",
    tourFoldersOverviewBody: "Здесь управляете текстами.",
    tourStudyOverviewTitle: "Страница изучения",
    tourStudyOverviewBody:
      "Соберите английское предложение из слов. Добавляйте новые слова в словарь.",
    tourBuildAreaTitle: "Собираем здесь",
    tourBuildAreaBody: "Нажмите слово, чтобы добавить, ещё раз — чтобы убрать.",
    tourWordPoolTitle: "Слова",
    tourWordPoolBody: "Эти слова составляют предложение.",
    tourVocabButtonTitle: "Словарь",
    tourVocabButtonBody: "Сохраните слово с переводом и заметкой.",
    tourEditTokensTitle: "Правка слов",
    tourEditTokensBody: "При необходимости скорректируйте слова.",
    tourRevealTitle: "Подсказка",
    tourRevealBody: "Показать правильное предложение.",
    tourResetTitle: "Сброс",
    tourResetBody: "Очистить и начать снова.",
    tourCheckTitle: "Проверка",
    tourCheckBody: "Узнать, верно ли.",
    tourZoomTitle: "Масштаб",
    tourZoomBody: "Измените размер текста.",
    tourNavTitle: "Навигация",
    tourNavBody: "Предыдущее / следующее предложение.",
    tourProgressTitle: "Прогресс",
    tourProgressBody: "Текущий номер из общего.",
    // Vocabulary page tour
    tourVocabOverviewTitle: "Страница словаря",
    tourVocabOverviewBody:
      "Сохраняйте слова, фильтруйте по дням, тренируйтесь и проходите тесты.",
    tourDayFilterTitle: "День",
    tourDayFilterBody: "Показать слова за выбранный день.",
    tourToggleDisplayTitle: "Вид",
    tourToggleDisplayBody: "Переключение слово→перевод / перевод→слово.",
    tourPracticeTitle: "Практика",
    tourPracticeBody: "Быстрая тренировка слушать и говорить.",
    tourQuizButtonTitle: "Тест",
    tourQuizButtonBody: "Проверьте себя вопросами с вариантами.",
    tourAddButtonTitle: "Добавить слово",
    tourAddButtonBody: "Добавьте новое слово с переводом и заметкой.",
    // Notes toggle
    showNotes: "Показывать заметки",
    hideNotes: "Скрыть заметки",
    hide: "Скрыть",
  },
  ko: {
    appTitle: "LinguaText",
    helloTitle: "텍스트로 언어를 학습하세요",
    environmentTWA: "앱에 오신 것을 환영합니다!",
    andHelloName: "그리고 {name}님, 안녕하세요!",
    folders: "폴더",
    vocabulary: "단어장",
    home: "홈",
    correct: "정답!",
    incorrect: "다시 시도해 보세요",
    reveal: "정답 보기",
    reset: "초기화",
    check: "확인",
    prev: "이전",
    next: "다음",
    tapWordsBelow: "아래 단어를 눌러 문장을 만들어 보세요",
    correctAnswer: "정답",
    zoomIn: "확대",
    zoomOut: "축소",
    resetZoom: "100%",
    tourRestart: "투어 다시 보기",
    // Study tour short
    tourStudyOverviewTitle: "학습 페이지",
    tourStudyOverviewBody:
      "아래 단어로 문장을 만들고, 단어를 단어장에 저장하세요.",
    tourBuildAreaTitle: "여기서 만들기",
    tourBuildAreaBody: "단어를 눌러 추가/제거하세요.",
    tourWordPoolTitle: "단어 모음",
    tourWordPoolBody: "이 단어들로 문장을 만듭니다.",
    tourVocabButtonTitle: "단어장",
    tourVocabButtonBody: "단어를 번역과 메모와 함께 저장하세요.",
    tourEditTokensTitle: "단어 편집",
    tourEditTokensBody: "필요하면 문장의 단어를 수정하세요.",
    tourRevealTitle: "힌트",
    tourRevealBody: "정답 문장을 보여줍니다.",
    tourResetTitle: "초기화",
    tourResetBody: "비우고 다시 시도하세요.",
    tourCheckTitle: "확인",
    tourCheckBody: "정답인지 확인하세요.",
    tourZoomTitle: "확대/축소",
    tourZoomBody: "텍스트 크기를 조절하세요.",
    tourNavTitle: "이동",
    tourNavBody: "이전/다음 문장으로 이동.",
    tourProgressTitle: "진행",
    tourProgressBody: "현재 위치를 봅니다.",
    // Vocabulary page tour (short)
    tourVocabOverviewTitle: "단어장",
    tourVocabOverviewBody: "단어를 저장하고, 날짜로 보며, 연습/퀴즈를 합니다.",
    tourDayFilterTitle: "날짜",
    tourDayFilterBody: "선택한 날짜의 단어만 보기.",
    tourToggleDisplayTitle: "보기 전환",
    tourToggleDisplayBody: "단어→번역 / 번역→단어 전환.",
    tourPracticeTitle: "연습",
    tourPracticeBody: "듣기/말하기 빠른 연습.",
    tourQuizButtonTitle: "퀴즈",
    tourQuizButtonBody: "선다형 퀴즈로 점검.",
    tourAddButtonTitle: "단어 추가",
    tourAddButtonBody: "번역과 메모와 함께 저장.",
    // Notes toggle
    showNotes: "메모 표시",
    hideNotes: "메모 숨기기",
    hide: "숨기기",
  },
  tr: {
    appTitle: "LinguaText",
    helloTitle: "Metinlerle dil öğrenin",
    environmentTWA: "Uygulamaya hoş geldiniz!",
    andHelloName: "ve merhaba, {name}!",
    folders: "Klasörler",
    vocabulary: "Sözlük",
    home: "Ana sayfa",
    correct: "Doğru!",
    incorrect: "Tekrar deneyin",
    reveal: "Göster",
    reset: "Sıfırla",
    check: "Kontrol",
    prev: "Önceki",
    next: "Sonraki",
    tapWordsBelow: "Aşağıdaki kelimelerle cümleyi oluşturun",
    correctAnswer: "Doğru cevap",
    zoomIn: "Yaklaştır",
    zoomOut: "Uzaklaştır",
    resetZoom: "100%",
    tourRestart: "Turu göster",
    tourStudyOverviewTitle: "Çalışma sayfası",
    tourStudyOverviewBody:
      "Alttaki kelimelerle cümle kurun, kelimeleri sözlüğe kaydedin.",
    tourBuildAreaTitle: "Burada kurun",
    tourBuildAreaBody: "Kelimeye basıp ekleyin/çıkarın.",
    tourWordPoolTitle: "Kelimeler",
    tourWordPoolBody: "Bu kelimelerle cümle oluşur.",
    tourVocabButtonTitle: "Sözlük",
    tourVocabButtonBody: "Kelimeleri çeviri ve not ile kaydedin.",
    tourEditTokensTitle: "Kelimeleri düzenle",
    tourEditTokensBody: "Gerekirse cümledeki kelimeleri düzeltin.",
    tourRevealTitle: "İpucu",
    tourRevealBody: "Doğru cümleyi göster.",
    tourResetTitle: "Sıfırla",
    tourResetBody: "Temizleyip tekrar deneyin.",
    tourCheckTitle: "Kontrol",
    tourCheckBody: "Doğru mu bakın.",
    tourZoomTitle: "Yakınlaştırma",
    tourZoomBody: "Yazı boyutunu ayarlayın.",
    tourNavTitle: "Gezinme",
    tourNavBody: "Önceki/Sonraki cümle.",
    tourProgressTitle: "İlerleme",
    tourProgressBody: "Neredesiniz görün.",
    // Vocabulary page tour (short)
    tourVocabOverviewTitle: "Sözlük",
    tourVocabOverviewBody:
      "Kelimeleri kaydedin, güne göre görün, pratik/quiz yapın.",
    tourDayFilterTitle: "Gün",
    tourDayFilterBody: "Seçilen gündeki kelimeleri göster.",
    tourToggleDisplayTitle: "Görünüm",
    tourToggleDisplayBody: "Kelime→çeviri / çeviri→kelime.",
    tourPracticeTitle: "Pratik",
    tourPracticeBody: "Hızlı dinleme/konuşma pratik.",
    tourQuizButtonTitle: "Quiz",
    tourQuizButtonBody: "Çoktan seçmeli quiz ile kontrol.",
    tourAddButtonTitle: "Kelime ekle",
    tourAddButtonBody: "Çeviri ve not ile yeni kelime ekleyin.",
    // Notes toggle
    showNotes: "Notları göster",
    hideNotes: "Notları gizle",
    hide: "Gizle",
  },
  de: {
    appTitle: "LinguaText",
    helloTitle: "Sprache mit Text lernen",
    environmentTWA: "Willkommen in der App!",
    andHelloName: "und hallo, {name}!",
    folders: "Ordner",
    vocabulary: "Vokabeln",
    home: "Startseite",
    correct: "Richtig!",
    incorrect: "Bitte nochmal",
    reveal: "Anzeigen",
    reset: "Zurücksetzen",
    check: "Prüfen",
    prev: "Zurück",
    next: "Weiter",
    tapWordsBelow: "Klicke unten auf Wörter, um den Satz zu bauen",
    correctAnswer: "Richtige Antwort",
    zoomIn: "Vergrößern",
    zoomOut: "Verkleinern",
    resetZoom: "100%",
    tourRestart: "Tour anzeigen",
    tourStudyOverviewTitle: "Lernseite",
    tourStudyOverviewBody:
      "Baue den englischen Satz aus Wörtern. Speichere neue Wörter im Vokabeltrainer.",
    tourBuildAreaTitle: "Hier bauen",
    tourBuildAreaBody: "Wort tippen zum Hinzufügen/Entfernen.",
    tourWordPoolTitle: "Wortliste",
    tourWordPoolBody: "Diese Wörter bilden den Satz.",
    tourVocabButtonTitle: "Vokabeln",
    tourVocabButtonBody: "Wort mit Übersetzung und Notiz speichern.",
    tourEditTokensTitle: "Wörter bearbeiten",
    tourEditTokensBody: "Bei Bedarf die Wörter anpassen.",
    tourRevealTitle: "Tipp",
    tourRevealBody: "Richtigen Satz anzeigen.",
    tourResetTitle: "Zurücksetzen",
    tourResetBody: "Leeren und neu versuchen.",
    tourCheckTitle: "Prüfen",
    tourCheckBody: "Prüfen, ob es stimmt.",
    tourZoomTitle: "Zoom",
    tourZoomBody: "Textgröße anpassen.",
    tourNavTitle: "Navigation",
    tourNavBody: "Vorheriger/Nächster Satz.",
    tourProgressTitle: "Fortschritt",
    tourProgressBody: "Aktuelle Position anzeigen.",
    // Vocabulary page tour (short)
    tourVocabOverviewTitle: "Vokabeln",
    tourVocabOverviewBody:
      "Wörter speichern, nach Tag filtern und üben/quizzen.",
    tourDayFilterTitle: "Tag",
    tourDayFilterBody: "Nur Wörter des gewählten Tages anzeigen.",
    tourToggleDisplayTitle: "Ansicht",
    tourToggleDisplayBody: "Wort→Übersetzung / Übersetzung→Wort.",
    tourPracticeTitle: "Üben",
    tourPracticeBody: "Schnelles Hören & Sprechen.",
    tourQuizButtonTitle: "Quiz",
    tourQuizButtonBody: "Mit Multiple-Choice prüfen.",
    tourAddButtonTitle: "Wort hinzufügen",
    tourAddButtonBody: "Neues Wort mit Übersetzung und Notiz.",
    // Notes toggle
    showNotes: "Notizen anzeigen",
    hideNotes: "Notizen ausblenden",
    hide: "Ausblenden",
  },
};

export function t(key: string, params?: Record<string, string | number>) {
  const dict = strings[current] || strings.en;
  let value = dict[key] || key;
  if (params) {
    for (const [k, v] of Object.entries(params)) {
      value = value.replace(`{${k}}`, String(v));
    }
  }
  return value;
}

export function setLocale(code: string) {
  current = strings[code] ? code : "en";
  try {
    localStorage.setItem("locale", current);
  } catch {}
}

export function ensureInitialLocale() {
  try {
    const saved = localStorage.getItem("locale");
    if (saved && strings[saved]) current = saved;
  } catch {}
}

export function useLocale() {
  const [loc, setLoc] = useState(current);
  useEffect(() => {
    setLoc(current);
  }, []);
  return loc;
}

export function getLocale() {
  return current;
}
